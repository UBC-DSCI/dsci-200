{
  "hash": "b7fb803e2af1f8a16f31a0fcef62123d",
  "result": {
    "engine": "knitr",
    "markdown": "---\nlecture: \"14 - Data Privacy II\"\nformat: revealjs\nmetadata-files: \n  - _metadata.yml\n---\n\n\n\n\n## {{< meta lecture >}} {.large background-image=\"img/smooths.png\" background-opacity=\"0.3\" background-size=\"50%\"}\n\n[DSCI 200]{.secondary}\n\n[{{< meta author >}}]{.secondary}\n\nLast modified -- 22 October 2025\n\n\n\n\n\n\n\n\n\n$$\n\\DeclareMathOperator*{\\argmin}{argmin}\n\\DeclareMathOperator*{\\argmax}{argmax}\n\\DeclareMathOperator*{\\minimize}{minimize}\n\\DeclareMathOperator*{\\maximize}{maximize}\n\\DeclareMathOperator*{\\find}{find}\n\\DeclareMathOperator{\\st}{subject\\,\\,to}\n\\newcommand{\\E}{E}\n\\newcommand{\\Expect}[1]{\\E\\left[ #1 \\right]}\n\\newcommand{\\Var}[1]{\\mathrm{Var}\\left[ #1 \\right]}\n\\newcommand{\\Cov}[2]{\\mathrm{Cov}\\left[#1,\\ #2\\right]}\n\\newcommand{\\given}{\\ \\vert\\ }\n\\newcommand{\\X}{\\mathbf{X}}\n\\newcommand{\\x}{\\mathbf{x}}\n\\newcommand{\\y}{\\mathbf{y}}\n\\newcommand{\\P}{\\mathcal{P}}\n\\newcommand{\\R}{\\mathbb{R}}\n\\newcommand{\\norm}[1]{\\left\\lVert #1 \\right\\rVert}\n\\newcommand{\\snorm}[1]{\\lVert #1 \\rVert}\n\\newcommand{\\tr}[1]{\\mbox{tr}(#1)}\n\\newcommand{\\brt}{\\widehat{\\beta}^R_{s}}\n\\newcommand{\\brl}{\\widehat{\\beta}^R_{\\lambda}}\n\\newcommand{\\bls}{\\widehat{\\beta}_{ols}}\n\\newcommand{\\blt}{\\widehat{\\beta}^L_{s}}\n\\newcommand{\\bll}{\\widehat{\\beta}^L_{\\lambda}}\n\\newcommand{\\U}{\\mathbf{U}}\n\\newcommand{\\D}{\\mathbf{D}}\n\\newcommand{\\V}{\\mathbf{V}}\n$$\n\n\n\n\n## Attribution\n<br><br>\n\n*This material is adapted from the following sources:* \n\n- [*Data Privacy Handbook*](https://utrechtuniversity.github.io/dataprivacyhandbook/)\n- [*DSCI 541: Privacy, Ethics, and Security at UBC*](https://ubc-mds.github.io/course-descriptions/DSCI_541_priv-eth-sec/)\n- [Harvard University Privacy Tools Project: Differential Privacy](https://privacytools.seas.harvard.edu/differential-privacy)\n\n## Case Study: Brogan Inc. and NIHB Data\n\n- The Non-Insured Health Benefits (NIHB) database contains sensitive health data on First Nations use of services like prescriptions, dental care, and medical devices.\n- In 2001, Health Canada began releasing de-identified NIHB pharmacy claims data to Brogan Inc., a private health consulting firm.\n- Though personal identifiers were removed, community identifiers remained, and First Nations were not informed until 2007.\n- Brogan sold the data to pharmaceutical companies for commercial research and marketing\n- Health Canada justified the release by claiming no privacy interests remained since personally identifying information had been removed.\n\n> Kukutai, T., & Taylor, J. (2016). Indigenous data sovereignty: Toward an agenda. ANU press.\n\n## Discussion\n\nTake 5 minutes to discuss this case in groups of 2-3. Consider these questions to reflect on:\n\n- Was the data truly de-identified? \n- Should de-identified data still require community consent before being shared or sold?\n- What are the limits of simply removing names and IDs from a dataset?\n- How can we measure whether a dataset is truly “safe” to release?\n\n## Learning Objectives\n\nBy the end of today's lesson, you should be able to:\n\n- Define identifiers, quasi-identifiers and sensitive attributes in data sets  \n- Explain the limitations of basic deidentification methods  \n- Describe the concepts of $k$-anonymity, $l$-diversity and $t$-closeness  \n- Apply $k$-anonymity and $l$-diversity to de-identify data \n- Understand the basic idea of differential privacy and its significance  \n\n## Why basic deidentification isn't always enough\n\n- Last class, we introduced some techniques for deidentification such as suppression and generalization.\n\n- However, individuals can often be re-identified using other information.\n\n- As datasets become more detailed and linkable, privacy risks increase.\n\n- Statistical methods are needed to ensure meaningful deidentification while preserving data utility.\n\n## Statistical approaches to deidentification \n<br></br>\n\n- $k$-anonymity  \n- $l$-diversity  \n- $t$-closeness  \n- Differential privacy (advanced)\n\n## Overview of privacy models\n\n- $k$-anonymity, $l$-diversity, and $t$-closeness are **statistical approaches** that quantify the level of identifiability within a tabular dataset.  \n- They focus on how variables combined can lead to identification.  \n- These approaches are complementary: a dataset can be simultaneously $k$-anonymous, $l$-diverse, and $t$-close, where $k$, $l$, and $t$ represent numeric thresholds.\n-  $k$-anonymity, $l$-diversity, and $t$-closeness are typically used to de-identify tabular datasets *before* sharing.\n- They work best on relatively large datasets, where enough observations are present to preserve useful detail while still protecting privacy.\n\n\n## Identifiers, Quasi-Identifiers, and Sensitive Attributes\n\nPrivacy models distinguish between three types of variables:\n\n- **Identifiers:** Direct identifiers such as names, student numbers, email addresses.  \n\n- **Quasi-Identifiers:**  Indirect identifiers that can lead to identification when combined with other quasi-identifiers or external data.  \n\t- Examples: age, sex, place of residence, physical characteristics, timestamps, etc.\n\n- **Sensitive Attributes:** Variables of interest that need protection and cannot be altered as they are key outcomes.  \n\t- Examples: Medical condition, Income, etc.\n\n\n## Importance of Correct Variable Categorization\n\n:::incremental\n- Correctly categorizing variables into identifiers, quasi-identifiers, and sensitive attributes is crucial.  \n- This categorization determines how to de-identify your dataset effectively using $k$-anonymity, $l$-diversity, and $t$-closeness.\n- Now, let's discuss each of these techniques in detail...\n:::\n\n## $k$-anonymity\n\n:::incremental\n- A data set is $k$-anonymous if each observation cannot be distinguished from at least $k-1$ other observations based on the quasi-identifiers.  \n- This can be achieved through generalization, suppression and sometimes top- or bottom-coding of data values.\n- Applying $k$-anonymity makes it more difficult for an attacker to single out or re-identify specific individuals.  \n- It also helps reduce the risk of the mosaic effect, where combining data points could lead to identification.\n:::\n\n## Making a data set $k$-anonymous\n\n:::incremental\n1. Identify variables as identifiers, quasi-identifiers and sensitive attributes.  \n2. Choose a value for $k$.  \n3. Aggregate or transform the data so each combination of quasi-identifiers occurs at least k times.  \n:::\n\n## Choosing $k$ \n\n- There is no single correct value for $k$! \n- Higher $k$ increases privacy, but reduces data detail and utility.  \n- The choice depends on promises made to data subjects and acceptable risk levels.\n\n<div style=\"text-align: center;\">\n  ![](https://www.k2view.com/hubfs/K%20anonymity.png){width=600px}\n  \n  <small>\n    Source: <a href=\"https://www.k2view.com/blog/what-is-k-anonymity\" target=\"_blank\">k2view.com</a>\n  </small>\n</div>\n\n## Example data\n\n- Age and city are quasi-identifiers, and salary is considered a sensitive attribute.\n\n<table style=\"width: 80%; border-collapse: collapse; font-size: 90%; line-height: 1;\">\n  <thead>\n    <tr>\n      <th style=\"text-align: left; border-bottom: 1px solid #ccc; padding: 4px 8px;\">Age</th>\n      <th style=\"text-align: left; border-bottom: 1px solid #ccc; padding: 4px 8px;\">City</th>\n      <th style=\"text-align: left; border-bottom: 1px solid #ccc; padding: 4px 8px;\">Salary</th>\n    </tr>\n  </thead>\n  <tbody>\n    <tr><td style=\"padding: 2px 8px;\">32</td><td style=\"padding: 2px 8px;\">Calgary</td><td style=\"padding: 2px 8px;\">91,000</td></tr>\n    <tr><td style=\"padding: 2px 8px;\">37</td><td style=\"padding: 2px 8px;\">Toronto</td><td style=\"padding: 2px 8px;\">92,000</td></tr>\n    <tr><td style=\"padding: 2px 8px;\">31</td><td style=\"padding: 2px 8px;\">Vancouver</td><td style=\"padding: 2px 8px;\">82,000</td></tr>\n    <tr><td style=\"padding: 2px 8px;\">48</td><td style=\"padding: 2px 8px;\">Calgary</td><td style=\"padding: 2px 8px;\">115,000</td></tr>\n    <tr><td style=\"padding: 2px 8px;\">39</td><td style=\"padding: 2px 8px;\">Vancouver</td><td style=\"padding: 2px 8px;\">118,000</td></tr>\n    <tr><td style=\"padding: 2px 8px;\">37</td><td style=\"padding: 2px 8px;\">Calgary</td><td style=\"padding: 2px 8px;\">97,000</td></tr>\n    <tr><td style=\"padding: 2px 8px;\">34</td><td style=\"padding: 2px 8px;\">Toronto</td><td style=\"padding: 2px 8px;\">98,000</td></tr>\n    <tr><td style=\"padding: 2px 8px;\">33</td><td style=\"padding: 2px 8px;\">Vancouver</td><td style=\"padding: 2px 8px;\">89,000</td></tr>\n    <tr><td style=\"padding: 2px 8px;\">32</td><td style=\"padding: 2px 8px;\">Toronto</td><td style=\"padding: 2px 8px;\">108,000</td></tr>\n    <tr><td style=\"padding: 2px 8px;\">45</td><td style=\"padding: 2px 8px;\">Calgary</td><td style=\"padding: 2px 8px;\">95,000</td></tr>\n  </tbody>\n</table>\n\n\n## $k=2$\n\n<table>\n  <thead>\n    <tr><th>Age Range</th><th>City</th><th>Salary Range</th></tr>\n  </thead>\n  <tbody>\n    <tr style=\"background-color: #FFEECC\"><td>20–29</td><td>Calgary</td><td>90,000–99,999</td></tr>\n    <tr style=\"background-color: #CCEEFF\"><td>30–39</td><td>Toronto</td><td>90,000–99,999</td></tr>\n    <tr style=\"background-color: #EEFFCC\"><td>30–39</td><td>Vancouver</td><td>80,000–89,999</td></tr>\n    <tr style=\"background-color: #FFDDEE\"><td>40–49</td><td>Calgary</td><td>110,000–119,999</td></tr>\n    <tr style=\"background-color: #EEFFCC\"><td>30–39</td><td>Vancouver</td><td>110,000–119,999</td></tr>\n    <tr style=\"background-color: #FFEECC\"><td>20–29</td><td>Calgary</td><td>90,000–99,999</td></tr>\n    <tr style=\"background-color: #CCEEFF\"><td>30–39</td><td>Toronto</td><td>90,000–99,999</td></tr>\n    <tr style=\"background-color: #EEFFCC\"><td>30–39</td><td>Vancouver</td><td>80,000–89,999</td></tr>\n    <tr style=\"background-color: #CCEEFF\"><td>30–39</td><td>Toronto</td><td>100,000–109,999</td></tr>\n    <tr style=\"background-color: #FFDDEE\"><td>40–49</td><td>Calgary</td><td>90,000–99,999</td></tr>\n  </tbody>\n</table>\n\n\n## $l$-diversity\n\n- $l$-diversity is an extension of $k$-anonymity that ensures sufficient variation in a *sensitive attribute*. \n- This is important because if all individuals within a group share the same sensitive value, there is still a risk of inference.\n- The approach requires at least $l$ different values for the sensitive attribute within each combination of quasi-identifiers.\n- Again, there is no perfect value for $l$ (typically $1< l \\leq k$).\n\n## \n\n- Although these data are $2$-anonymous, we can still infer that any 30-39 year old from Calgary who participated earns between 90-99k. \n\n<table style=\"font-size: 90%; border-collapse: collapse;\">\n  <thead>\n    <tr><th style=\"padding: 4px;\">Age Range</th><th style=\"padding: 4px;\">City</th><th style=\"padding: 4px;\">Salary Range</th></tr>\n  </thead>\n  <tbody>\n    <tr style=\"background-color: #FFEECC\"><td style=\"padding: 4px;\">30–39</td><td style=\"padding: 4px;\">Calgary</td><td style=\"padding: 4px;\">90,000–99,999</td></tr>\n    <tr style=\"background-color: #CCEEFF\"><td style=\"padding: 4px;\">30–39</td><td style=\"padding: 4px;\">Toronto</td><td style=\"padding: 4px;\">90,000–99,999</td></tr>\n    <tr style=\"background-color: #EEFFCC\"><td style=\"padding: 4px;\">30–39</td><td style=\"padding: 4px;\">Vancouver</td><td style=\"padding: 4px;\">80,000–89,999</td></tr>\n    <tr style=\"background-color: #FFDDEE\"><td style=\"padding: 4px;\">40–49</td><td style=\"padding: 4px;\">Calgary</td><td style=\"padding: 4px;\">110,000–119,999</td></tr>\n    <tr style=\"background-color: #EEFFCC\"><td style=\"padding: 4px;\">30–39</td><td style=\"padding: 4px;\">Vancouver</td><td style=\"padding: 4px;\">110,000–119,999</td></tr>\n    <tr style=\"background-color: #FFEECC\"><td style=\"padding: 4px;\">30–39</td><td style=\"padding: 4px;\">Calgary</td><td style=\"padding: 4px;\">90,000–99,999</td></tr>\n    <tr style=\"background-color: #CCEEFF\"><td style=\"padding: 4px;\">30–39</td><td style=\"padding: 4px;\">Toronto</td><td style=\"padding: 4px;\">90,000–99,999</td></tr>\n    <tr style=\"background-color: #EEFFCC\"><td style=\"padding: 4px;\">30–39</td><td style=\"padding: 4px;\">Vancouver</td><td style=\"padding: 4px;\">80,000–89,999</td></tr>\n    <tr style=\"background-color: #CCEEFF\"><td style=\"padding: 4px;\">30–39</td><td style=\"padding: 4px;\">Toronto</td><td style=\"padding: 4px;\">100,000–109,999</td></tr>\n    <tr style=\"background-color: #FFDDEE\"><td style=\"padding: 4px;\">40–49</td><td style=\"padding: 4px;\">Calgary</td><td style=\"padding: 4px;\">90,000–99,999</td></tr>\n  </tbody>\n</table>\n\n\n## \n\n- With $l=2$, that means that for each combination of Age Range and City, there are at least 2 distinct Salary Ranges.\n\n<table style=\"font-size: 90%; border-collapse: collapse;\">\n  <thead>\n    <tr>\n      <th style=\"padding: 4px;\">Age Range</th>\n      <th style=\"padding: 4px;\">City</th>\n      <th style=\"padding: 4px;\">Salary Range</th>\n    </tr>\n  </thead>\n  <tbody>\n    <tr style=\"background-color: #FFEECC\"><td style=\"padding: 4px;\">30–39</td><td style=\"padding: 4px;\">-</td><td style=\"padding: 4px;\">90,000–99,999</td></tr>\n    <tr style=\"background-color: #CCEEFF\"><td style=\"padding: 4px;\">30–39</td><td style=\"padding: 4px;\">-</td><td style=\"padding: 4px;\">90,000–99,999</td></tr>\n    <tr style=\"background-color: #EEFFCC\"><td style=\"padding: 4px;\">30–39</td><td style=\"padding: 4px;\">-</td><td style=\"padding: 4px;\">80,000–89,999</td></tr>\n    <tr style=\"background-color: #FFDDEE\"><td style=\"padding: 4px;\">40–49</td><td style=\"padding: 4px;\">Calgary</td><td style=\"padding: 4px;\">110,000–119,999</td></tr>\n    <tr style=\"background-color: #EEFFCC\"><td style=\"padding: 4px;\">30–39</td><td style=\"padding: 4px;\">-</td><td style=\"padding: 4px;\">110,000–119,999</td></tr>\n    <tr style=\"background-color: #FFEECC\"><td style=\"padding: 4px;\">30–39</td><td style=\"padding: 4px;\">-</td><td style=\"padding: 4px;\">90,000–99,999</td></tr>\n    <tr style=\"background-color: #CCEEFF\"><td style=\"padding: 4px;\">30–39</td><td style=\"padding: 4px;\">-</td><td style=\"padding: 4px;\">90,000–99,999</td></tr>\n    <tr style=\"background-color: #EEFFCC\"><td style=\"padding: 4px;\">30–39</td><td style=\"padding: 4px;\">-</td><td style=\"padding: 4px;\">80,000–89,999</td></tr>\n    <tr style=\"background-color: #CCEEFF\"><td style=\"padding: 4px;\">30–39</td><td style=\"padding: 4px;\">-</td><td style=\"padding: 4px;\">100,000–109,999</td></tr>\n    <tr style=\"background-color: #FFDDEE\"><td style=\"padding: 4px;\">40–49</td><td style=\"padding: 4px;\">Calgary</td><td style=\"padding: 4px;\">90,000–99,999</td></tr>\n  </tbody>\n</table>\n\n\n## $t$-closeness\n\n:::incremental\n- $t$-closeness builds on k-anonymity and l-diversity by requiring that the distribution of the sensitive attribute within each group of quasi-identifiers is close to the distribution in the full dataset.\n- This prevents situations where a sensitive value is overly dominant in a group, which could allow re-identification through skewed distributions.\n- For example, in a dataset with Age and Sex as quasi-identifiers and Income as the sensitive attribute, applying t-closeness with $t = 0.1$ means the income distribution in each group must stay within 10\\% of the overall income distribution.\n- In this course, we will focus mainly on $k$-anonymity and $l$-diversity as $t$-closeness can get complicated to implement.\n:::\n\n## There are still issues...\n\n- Even though the data is de-identified, some sensitive patterns can still leak through.\n\n- In the example we discussed, both individuals are grouped into the same age range and city.\n\n- While they are in different salary ranges and exact values are hidden, the range is still quite narrow.\n\n- Due to the similarity of the salary ranges, one can still infer that both individuals earn between \\$90,000 and \\$119,999.\n\n<table>\n  <thead>\n    <tr><th>Age Range</th><th>City</th><th>Salary Range</th></tr>\n  </thead>\n  <tbody>\n    <tr style=\"background-color: #FFDDEE\"><td>40–49</td><td>Calgary</td><td>110,000–119,999</td></tr>\n    <tr style=\"background-color: #FFDDEE\"><td>40–49</td><td>Calgary</td><td>90,000–99,999</td></tr>\n  </tbody>\n</table>\n\n## Differential privacy\n\n- So, we may need more sophisticated tools to privatize our data...\n- Differential privacy is a mathematical approach to protecting privacy\n- It ensures algorithm results are nearly the same whether one person’s data is included or not\n- Differential privacy makes it hard to tell if any individual’s data is in the dataset, which protects individual's information (even with unusual or unique data)\n\n## \n\n<center>\n<img src=\"https://miro.medium.com/v2/resize:fit:1400/1*zRpTLYBAfumNAZIM7mZkXw.png\" alt=\"Differential Privacy Example\" width=\"70%\">\n\n<br>\n\n<span style=\"font-size: 0.8em;\">\nSource: <a href=\"https://medium.com/data-science/a-differential-privacy-example-for-beginners-ef3c23f69401\">https://medium.com/data-science/a-differential-privacy-example-for-beginners-ef3c23f69401</a>\n</span>\n</center>\n\n##\n\n- Differential privacy is a complex topic and goes beyond the scope of this course  \n- For a clear and accessible explanation, check out this short video:\n\n<center>\n<iframe width=\"560\" height=\"315\" src=\"https://www.youtube.com/embed/gI0wk1CXlsQ\" title=\"Differential Privacy — Simply Explained\" frameborder=\"0\" allow=\"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture\" allowfullscreen></iframe>\n</center>\n\n\n## iClicker Question 1\n\nGiven the data, which **single** field could you generalize to help achieve **k = 3 anonymity**?\n\n<div style=\"font-size:0.8em; max-width: 400px; margin: auto;\">\n\n| Age | ZIP Code | Disease   |\n|-----|----------|-----------|\n| 29  | 13053    | Flu       |\n| 27  | 13068    | Flu       |\n| 28  | 13068    | Cold      |\n| 45  | 14853    | Diabetes  |\n| 46  | 14853    | Diabetes  |\n| 47  | 14853    | Cancer    |\n\n</div>\n\n- A. Generalize Age into age ranges (e.g., 20–29, 40–49)  \n- B. Suppress Disease entirely  \n- C. Generalize ZIP Code to first 3 digits (e.g., 130**, 148**)  \n- D. Remove the 3rd row  \n- E. It's already $k=3$ anonymous\n\n## iClicker Question 2\n\nWhich of the following datasets violates $k = 2$ anonymity?\n\n::: columns\n\n:::: column\n\n**Option A**\n\n| Age | Sex | ZIP   |\n|-----|--------|-------|\n| 34  | M      | 02138 |\n| 34  | M      | 02138 |\n| 34  | F      | 02139 |\n\n::::\n\n:::: column\n\n**Option B**\n\n| Age | Sex | ZIP   |\n|-----|--------|-------|\n| 22  | F      | 10011 |\n| 22  | F      | 10011 |\n| 22  | F      | 10011 |\n\n::::\n\n:::: column\n\n**Option C**\n\n| Age Range | Sex | ZIP Prefix |\n|-----------|--------|------------|\n| 30–39     | *      | 021**      |\n| 30–39     | *      | 021**      |\n| 30–39     | *      | 021**      |\n\n::::\n\n:::\n\n- A. Only A  \n- B. Only B  \n- C. Only C  \n- D. A and B  \n\n\n\n## Question 3\n\nConsider this 3-anonymous dataset. Is it also 2-diverse with respect to \"Condition\"?\n\n<div style=\"font-size:0.8em; max-width: 400px; margin: auto;\">\n\n| Age Range | ZIP Prefix | Condition |\n|-----------|------------|-----------|\n| 20–29     | 130**      | Flu       |\n| 20–29     | 130**      | Flu       |\n| 20–29     | 130**      | Flu       |\n| 30–39     | 148**      | Cold      |\n| 30–39     | 148**      | Cold      |\n| 30–39     | 148**      | Cancer    |\n\n</div>\n\n- A. Yes, both groups have 2 or more different values  \n- B. No, one group violates l-diversity  \n- C. Yes, because the dataset is already k-anonymous  \n- D. No, both groups have only one distinct value  \n\n\n## Key Takeaways\n\n- Removing direct identifiers alone does not guarantee privacy  \n- Quasi-identifiers can lead to re-identification if not protected  \n- $k$-anonymity makes each record indistinguishable from at least $k - 1$ others\n- $l$-diversity improves protection by promoting diversity in sensitive attributes \n- Differential privacy offers mathematical privacy guarantees  \n- Choosing privacy parameters involves balancing risk and data utility \n\n\n",
    "supporting": [],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {},
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}